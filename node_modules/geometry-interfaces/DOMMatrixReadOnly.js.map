{"version":3,"file":"DOMMatrixReadOnly.js","sources":["../src/DOMMatrixReadOnly.js"],"sourcesContent":["import DOMMatrix from './DOMMatrix'\nimport {applyArrayValuesToDOMMatrix} from './utilities'\n\n// This matrix is represented internally in row-major format so that it is easy\n// to look at visually. In a pair of coordinates (as in \"m23\") the first number\n// is the column and the second is the row (so \"m23\" means column 2 row 3).\nconst identity = [\n    /*m11*/1, /*m21*/0, /*m31*/0, /*m41*/0,\n    /*m12*/0, /*m22*/1, /*m32*/0, /*m42*/0,\n    /*m13*/0, /*m23*/0, /*m33*/1, /*m43*/0,\n    /*m14*/0, /*m24*/0, /*m34*/0, /*m44*/1,\n]\n\nvar DOMMatrixReadOnly = null\n\nexport\nfunction initDOMMatrixReadOnly() {\n    if (DOMMatrixReadOnly) return\n\n    DOMMatrixReadOnly = class DOMMatrixReadOnly {\n\n        /**\n         * @param {Array.number} numberSequence An array of numbers. If the array\n         * has 6 items, then those items set the values of m11, m12, m21, m22, m41,\n         * m42 in that order (or the values a, b, c, d, e, f if you're using those\n         * aliases) and this.is2D is true. If the array has 16 items (in\n         * column-major order), then they set all the values of the underlying\n         * matrix (m11 to m44) and this.is2D is set false. Arrays of other lengths\n         * throw an error.\n         */\n        constructor(numberSequence = []) {\n            if (!(this instanceof DOMMatrix))\n                throw new TypeError(`DOMMatrixReadOnly can't be instantiated directly. Use DOMMatrix instead.`)\n\n            const {length} = numberSequence\n\n            if (length === undefined || !(length === 6 || length === 16))\n                throw new TypeError('DOMMatrix constructor argument \"numberSequence\" must be an array-like with 6 or 16 numbers.')\n\n            this._matrix = new Float64Array(identity)\n            this._isIdentity = true\n            this._is2D = length === 6 ? true : false\n\n            applyArrayValuesToDOMMatrix(numberSequence, this)\n        }\n\n        // Immutable transform methods -------------------------------------------\n\n        translate (tx, ty, tz = 0) {\n            return new DOMMatrix(this).translateSelf(tx, ty, tz)\n        }\n\n        scale (scale, originX = 0, originY = 0) {\n            return new DOMMatrix(this).scaleSelf(scale, originX, originY)\n        }\n\n        scale3d (scale, originX = 0, originY = 0, originZ = 0) {\n            return new DOMMatrix(this).scale3dSelf(scale, originX, originY, originZ)\n        }\n\n        scaleNonUniform (scaleX, scaleY = 1, scaleZ = 1, originX = 0, originY = 0, originZ = 0) {\n            return new DOMMatrix(this).scaleNonUniformSelf(scaleX, scaleY, scaleZ, originX, originY, originZ)\n        }\n\n        rotate (angle, originX = 0, originY = 0) {\n            return new DOMMatrix(this).rotateSelf(angle, originX, originY)\n        }\n\n        // TODO\n        rotateFromVector (x, y) {\n            throw new Error('rotateFromVector is not implemented yet.')\n        }\n\n        rotateAxisAngle (x, y, z, angle) {\n            return new DOMMatrix(this).rotateAxisAngleSelf(x, y, z, angle)\n        }\n\n        skewX (sx) {\n            throw new Error('skewX is not implemented yet.')\n        }\n        skewY (sy) {\n            throw new Error('skewY is not implemented yet.')\n        }\n\n        multiply (other) {\n            return new DOMMatrix(this).multiplySelf(other)\n        }\n\n        flipX () {\n            throw new Error('flipX is not implemented yet.')\n        }\n        flipY () {\n            throw new Error('flipY is not implemented yet.')\n        }\n        inverse () {\n            throw new Error('inverse is not implemented yet.')\n        }\n\n        transformPoint(/*optional DOMPointInit*/ point) {\n            throw new Error('transformPoint is not implemented yet.')\n        }\n\n        toFloat32Array() {\n            return Float32Array.from(this._matrix)\n        }\n        toFloat64Array() {\n            return Float64Array.from(this._matrix)\n        }\n\n        //stringifier() {} // What's this?\n\n        get is2D() {\n            return this._is2D\n        }\n\n        /*\n         * TODO: make sure this matches the spec.\n         * TODO: Instead of calculating here, perhaps calculate and set\n         * this._isIdentity in other operations, and simply return the internal one\n         * here.\n         */\n        get isIdentity() {\n            for (var i = 0, len = this._matrix.length; i < len; i+=1) {\n                if (this._matrix[i] != identity[i])\n                    return (this._isIdentity = false)\n            }\n\n            return (this._isIdentity = true)\n        }\n\n        get a() { return this.m11 }\n        get b() { return this.m12 }\n        get c() { return this.m21 }\n        get d() { return this.m22 }\n        get e() { return this.m41 }\n        get f() { return this.m42 }\n\n        get m11() { return this._matrix[0]  }\n        get m12() { return this._matrix[4]  }\n        get m13() { return this._matrix[8]  }\n        get m14() { return this._matrix[12] }\n\n        get m21() { return this._matrix[1]  }\n        get m22() { return this._matrix[5]  }\n        get m23() { return this._matrix[9]  }\n        get m24() { return this._matrix[13] }\n\n        get m31() { return this._matrix[2]  }\n        get m32() { return this._matrix[6]  }\n        get m33() { return this._matrix[10] }\n        get m34() { return this._matrix[14] }\n\n        get m41() { return this._matrix[3]  }\n        get m42() { return this._matrix[7]  }\n        get m43() { return this._matrix[11] }\n        get m44() { return this._matrix[15] }\n    }\n}\n\ninitDOMMatrixReadOnly()\n\n// export default as a \"live binding\", not a static default.\nexport {DOMMatrixReadOnly as default}\n"],"names":["scale","this"],"mappings":";;;;;;QAgBS,AAAqB;;AAhB9B,AAAO,AAAS,AAAM,AAAa;;;;AACnC,AAAQ,AAA2B,AAAO,AAAa;;;;;;;AAKvD,MAAM,AAAQ;OACH,AAAC,CADK,SACI,AAAC,UAAS,AAAC,UAAS,AAAC;OAC/B,AAAC,UAAS,AAAC,UAAS,AAAC,UAAS,AAAC;OAC/B,AAAC,UAAS,AAAC,UAAS,AAAC,UAAS,AAAC;OAC/B,AAAC,UAAS,AAAC,UAAS,AAAC,UAAS,AAAC,AAC1C,AAAC;;AAED,IAAI,AAAiB,oBAAG,AAAI,AAE5B;;AACA,iCAAiC;AAC7B,QAAI,AAAiB,mBAAE;AAAA,AAAM;AAAA;;AAE7B,AAAiB,AAAG;AAAwB,AAWxC,iBAAW,kBAAC,AAAmB,gBAAL,AAAO;2CAAP,iBAAG,AAAE,AAAG;;AAC9B,gBAAI,AAAC,EAAC,AAAI,AAAY,AAAS,AAAC,sCAC5B;AAAA,sBAAM,IAAI,AAAS,UAAC,AAAyE,AAAC,AAAC;AAAA;;AAEnG,AAAO,gBAAA,AAAM,wBAAP,AAAO,AAAC,AAAiB;;AAE/B,gBAAI,AAAM,WAAK,AAAS,aAAI,AAAC,EAAC,AAAM,WAAK,AAAC,KAAI,AAAM,WAAK,AAAE,AAAC,KACxD;AAAA,sBAAM,IAAI,AAAS,UAAC,AAA6F,AAAC;AAAA;;AAEtH,AAAI,iBAAC,AAAO,UAAG,IAAI,AAAY,aAAC,AAAQ,AAAC;AACzC,AAAI,iBAAC,AAAW,cAAG,AAAI;AACvB,AAAI,iBAAC,AAAK,QAAG,AAAM,WAAK,AAAC,IAAG,AAAI,OAAG,AAAK;;AAExC,AAA2B,wDAAC,AAAc,gBAAE,AAAI,AAAC;AACpD;;mPAAA;;;;AAID,oCAAA,AAAS,AAAC,qBAAA,UAAC,AAAE,IAAE,AAAE,IAAE,AAAM,IAAJ,AAAM;+BAAN,KAAG,AAAC,AAAG;;AACxB,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAa,cAAC,AAAE,IAAE,AAAE,IAAE,AAAE,AAAC;AACvD;;AAED,oCAAA,AAAK,AAAC,iBAAA,MAAC,AAAK,SAAE,AAAW,SAAE,AAAW,SAAjB,AAAmB;oCAAnB,UAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAG;;AACrC,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAS,UAAC,AAAK,SAAE,AAAO,SAAE,AAAO,AAAC;AAChE;;AAED,oCAAA,AAAO,AAAC,mBAAA,QAAC,AAAK,OAAE,AAAW,SAAE,AAAW,SAAE,AAAW,SAA9B,AAAgC;oCAAhC,UAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAG;;AACpD,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAW,YAAC,AAAK,OAAE,AAAO,SAAE,AAAO,SAAE,AAAO,AAAC;AAC3E;;AAED,oCAAA,AAAe,AAAC,2BAAA,gBAAC,AAAM,QAAE,AAAU,QAAE,AAAU,QAAE,AAAW,SAAE,AAAW,SAAE,AAAW,SAAvD,AAAyD;mCAAzD,SAAG,AAAC,AAAQ;mCAAA,SAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAG;;AACrF,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAmB,oBAAC,AAAM,QAAE,AAAM,QAAE,AAAM,QAAE,AAAO,SAAE,AAAO,SAAE,AAAO,AAAC;AACpG;;AAED,oCAAA,AAAM,AAAC,kBAAA,OAAC,AAAK,OAAE,AAAW,SAAE,AAAW,SAAjB,AAAmB;oCAAnB,UAAG,AAAC,AAAS;oCAAA,UAAG,AAAC,AAAG;;AACtC,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAU,WAAC,AAAK,OAAE,AAAO,SAAE,AAAO,AAAC;AACjE;;;AAGD,oCAAA,AAAgB,AAAC,4BAAA,iBAAC,AAAC,GAAE,AAAC,GAAE;AACpB,kBAAM,IAAI,AAAK,MAAC,AAA0C,AAAC;AAC9D;;AAED,oCAAA,AAAe,AAAC,2BAAA,gBAAC,AAAC,GAAE,AAAC,GAAE,AAAC,GAAE,AAAK,OAAE;AAC7B,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAmB,oBAAC,AAAC,GAAE,AAAC,GAAE,AAAC,GAAE,AAAK,AAAC;AACjE;;AAED,oCAAA,AAAK,AAAC,iBAAA,MAAC,AAAE,IAAE;AACP,kBAAM,IAAI,AAAK,MAAC,AAA+B,AAAC;AACnD;AACD,oCAAA,AAAK,AAAC,iBAAA,MAAC,AAAE,IAAE;AACP,kBAAM,IAAI,AAAK,MAAC,AAA+B,AAAC;AACnD;;AAED,oCAAA,AAAQ,AAAC,oBAAA,SAAC,AAAK,OAAE;AACb,mBAAO,AAAI,AAAS,wBAAC,AAAI,AAAC,MAAC,AAAY,aAAC,AAAK,AAAC;AACjD;;AAED,oCAAA,AAAK,AAAC,iBAAA,QAAG;AACL,kBAAM,IAAI,AAAK,MAAC,AAA+B,AAAC;AACnD;AACD,oCAAA,AAAK,AAAC,iBAAA,QAAG;AACL,kBAAM,IAAI,AAAK,MAAC,AAA+B,AAAC;AACnD;AACD,oCAAA,AAAO,AAAC,mBAAA,UAAG;AACP,kBAAM,IAAI,AAAK,MAAC,AAAiC,AAAC;AACrD;;AAED,oCAAA,AAAc,0BAAA,yCAA2B,AAAK,OAAE;AAC5C,kBAAM,IAAI,AAAK,MAAC,AAAwC,AAAC;AAC5D;;AAED,oCAAA,AAAc,0BAAA,iBAAG;AACb,mBAAO,AAAY,aAAC,AAAI,KAAC,AAAI,KAAC,AAAO,AAAC;AACzC;AACD,oCAAA,AAAc,0BAAA,iBAAG;AACb,mBAAO,AAAY,aAAC,AAAI,KAAC,AAAI,KAAC,AAAO,AAAC;AACzC;;;;AAID,2BAAA,AAAI,AAAI,WAAA,YAAG;AACP,mBAAO,AAAI,KAAC,AAAK;AACpB;;;;;;;;AAQD,2BAAA,AAAI,AAAU,iBAAA,YAAG,AAAC;yBAAA;;AACd,iBAAK,IAAI,AAAC,IAAG,AAAC,GAAE,AAAG,MAAG,AAAI,KAAC,AAAO,QAAC,AAAM,QAAE,AAAC,IAAG,AAAG,KAAE,AAAC,KAAE,AAAC,GAAE;AACtD,oBAAI,AAAI,OAAC,AAAO,QAAC,AAAC,AAAC,MAAI,AAAQ,SAAC,AAAC,AAAC,IAC9B;AAAA,AAAO,2BAAC,AAAI,OAAC,AAAW,cAAG,AAAK,AAAC;AAAA;AACxC;;AAED,AAAO,mBAAC,AAAI,KAAC,AAAW,cAAG,AAAI,AAAC;AACnC;;AAED,2BAAA,AAAI,AAAC,QAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAG;AAAE;AAC3B,2BAAA,AAAI,AAAC,QAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAG;AAAE;AAC3B,2BAAA,AAAI,AAAC,QAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAG;AAAE;AAC3B,2BAAA,AAAI,AAAC,QAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAG;AAAE;AAC3B,2BAAA,AAAI,AAAC,QAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAG;AAAE;AAC3B,2BAAA,AAAI,AAAC,QAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAG;AAAE;;AAE3B,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAE,AAAC;AAAE;;AAErC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAE,AAAC;AAAE;;AAErC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAE,AAAC;AAAE;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAE,AAAC;AAAE;;AAErC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAC,AAAC;AAAG;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAE,AAAC;AAAE;AACrC,2BAAA,AAAI,AAAG,UAAA,YAAG;AAAE,mBAAO,AAAI,KAAC,AAAO,QAAC,AAAE,AAAC;AAAE,AACxC;;;;;AAAA;AACJ;;AAED,AAAqB,AAAE;;AAGvB;QAA6B,AAAO,AAAC,UAA7B,AAAiB"}